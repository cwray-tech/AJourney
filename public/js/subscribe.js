const cardHolderName=document.getElementById("card-holder-name"),cardButton=document.getElementById("card-button"),clientSecret=cardButton.dataset.secret,form=document.getElementById("subscribe-form"),elements=stripe.elements(),errors=document.getElementById("stripe-errors"),paymentMethod=document.getElementById("payment-method");var style={base:{padding:"10px 12px",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a"}};const cardElement=elements.create("card",{style:style,classes:{base:"input",focus:"border-black",invalid:"border-red-500"}});cardElement.mount("#card-element"),cardButton.addEventListener("click",(async e=>{if(e.preventDefault(),cardButton.setAttribute("disabled",!0),cardButton.innerText="Subscribing...",errors.innerText="",errors.classList.remove("bg-red-200","p-2","my-2","rounded"),cardHolderName.value){cardHolderName.classList.remove("border-red-500");const{setupIntent:e,error:r}=await stripe.confirmCardSetup(clientSecret,{payment_method:{card:cardElement,billing_details:{name:cardHolderName.value}}});r?(errors.innerText=r.message,errors.classList.add("bg-red-200","p-2","my-2","rounded"),cardButton.removeAttribute("disabled"),cardButton.innerText="Subscribe"):(paymentMethod.value=e.payment_method,form.submit())}else errors.innerText="Please add the card holder name.",errors.classList.add("bg-red-200","p-2","my-2","rounded"),cardHolderName.classList.add("border-red-500"),cardButton.removeAttribute("disabled"),cardButton.innerText="Subscribe"}));
